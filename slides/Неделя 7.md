---
marp: true
header: 
footer: ![height:40px](https://www.markslides.ai/image/credit.png)
title: "Неделя 7"
paginate: true
class: normal
theme: default
size: 16:9
style: |
  pre {
    overflow: auto;
  }
---

# Неделя 7 — Модули, импорты и множества

---

# Часть 1: Модули и импорты

За последние недели мы импортировали модули, не задумываясь:

- **Неделя 2**: `import json` — работа с JSON
- **Неделя 5**: `import requests` — HTTP-запросы к API
- **Неделя 6**: `from collections import Counter` — частотный анализ

**Сегодня разберём, как это работает!**

---

## Что такое модуль?

**Модуль** = файл с готовым кодом, который можно использовать

**Зачем нужны модули?**

Принцип **DRY** (Don't Repeat Yourself) — не изобретай велосипед:
- `json` — работа с JSON-форматом
- `requests` — HTTP-запросы к API
- `collections` — расширенные структуры данных (Counter, defaultdict)
- `csv` — работа с табличными данными
- `datetime` — даты и время
- `random` — случайные числа

---
**1. Импорт всего модуля**
- `import requests`
- Использование: `requests.get(url)`

**2. Импорт с псевдонимом**
- `import collections as coll`
- Использование: `coll.Counter(words)`

**3. Импорт конкретной функции** 
- `from collections import Counter`
- Использование: `Counter(words)` — напрямую, без префикса

---

## Стандартная библиотека Python: Встроенные модули

- `collections`: Counter, defaultdict
- `json`: работа с JSON; `csv`: работа с CSV-файлами

**Полезные утилиты:**
- `datetime`: даты и время
- `random`: случайные числа
- `math`: математические функции

**Сторонние библиотеки** (нужно устанавливать):
- `requests`: HTTP-запросы (мы использовали)
- `pandas`: анализ данных
- `beautifulsoup4`: парсинг HTML

---

## Хорошие и плохие практики

**Хорошая практика:**
- Все импорты в **начале** файла/ноутбука
- Импортируй только то, что **нужно**
- Используй понятные имена

**Плохая практика:**
- `from module import *` — засоряет пространство имён
- Импорт в середине кода — теряется читаемость
- Переопределение стандартных имён

**Правило**: Все импорты вверху, явно указываем: что импортируем

---

# Часть 2: Множества

**Множество (set)** — как словарь уникальных слов автора

В книге слово «магия» может встречаться 100 раз,
но в **словаре автора** оно записано только **один раз**

**Пример:**
- Список слов: `["магия", "волшебство", "заклинание", "магия", "волшебство"]`
- Множество: `{"магия", "волшебство", "заклинание"}`
- **Всего слов**: 5 → **Уникальных**: 3

**Множество автоматически удаляет дубликаты!**

---

## Создание множеств

1. **Литерал** (фигурные скобки с элементами)
   - `{"Люмос", "Вингардиум", "Экспекто"}`

2. **Из списка** (автоматическое удаление дубликатов)
   - `set(["заклинание", "заклинание", "магия"])` → `{"заклинание", "магия"}`

3. **Пустое множество**: **ВАЖНО!**
   - `set()` — правильно
   - `{}` — это **словарь**, не множество!

---

## Проверка принадлежности — суперсила множеств

**Молниеносная проверка** — основное преимущество:

**Словарь автора** (10 000+ слов):
- `"магия" in rowling_vocab` → **O(1)** — мгновенно!
- Для списка → **O(n)** — медленно 

**Для 10 000 слов: множество в ~10 000 раз быстрее!**

Это критично при работе с большими корпусами текстов.

---

## Базовые операции

**Основные методы:**

- `.add("зелье")` — добавить элемент
- `.remove("зелье")` — удалить (ошибка, если нет!)
- `.discard("эликсир")` — безопасное удаление
- `len(vocab)` — количество элементов
- `for word in vocab:` — итерация

**Совет**: Используйте `.discard()` для безопасности!

---

## Капкан 1: Пустое множество

**НЕПРАВИЛЬНО:** `{}` — это словарь!
**ПРАВИЛЬНО:** `set()` — это множество

**Правило:** `{}` всегда создаёт словарь, используйте `set()`

---

## Капкан 2: Множества неупорядочены

**Особенности:**
- Порядок НЕ гарантирован
- Нельзя обращаться по индексу: `words[0]`
- Можно только итерироваться: `for word in words:`

**Множества — не для упорядоченного хранения!**

---

## Капкан 3: Только неизменяемые элементы

**Можно добавлять:**
- Строки, числа, кортежи
- `{"text", 42, 3.14, (1, 2)}`

**Нельзя добавлять:**
- Списки, словари, множества
- `{["список"]}` → TypeError!

**Решение:** используйте кортежи вместо списков

---

## Что вы умеете сейчас

### **Неделя 1-2: Работа с текстами**
- Обрабатывать строки (очистка, форматирование)
- Использовать методы строк (`.lower()`, `.split()`, `.strip()`)
- Извлекать метаданные из текстов

### **Неделя 3-4: Коллекции и циклы**
- Хранить данные в списках и кортежах
- Автоматизировать обработку (for/while)
- Фильтровать и трансформировать данные

---

## Что вы умеете сейчас

### **Неделя 5: Функции и файлы**
- Создавать переиспользуемый код (функции)
- Читать и записывать файлы
- Работать с реальными корпусами

### **Неделя 6: Структуры данных**
- Использовать словари для метаданных
- Проводить частотный анализ (Counter)
- Сортировать данные (lambda, sorted)
---

## Реальные DH-задачи, которые вы можете решать

**Прямо сейчас вы можете:**

1. **Частотный анализ** любого текста или корпуса
2. **Сравнение словарей** разных авторов/эпох
3. **Извлечение метаданных** из литературных текстов
4. **Автоматизация обработки** сотен файлов
5. **Работа с API** корпусов (PoeTree, DraCor)
6. **Создание конкордансов** и индексов
7. **Базовая стилометрия** (TTR, hapax legomena)

**Это не игрушечные навыки — это реальные исследовательские инструменты!**

---

## Что дальше: Модуль 2. Переход на локальную разработку

**Настройка окружения**
- Установка Python на ваш компьютер
- Знакомство с VSCode
- Установка библиотек через pip

**Git и GitHub**
- Системы контроля версий
- Создание репозиториев
- Коммиты и история изменений
- Совместная работа

---

**Регулярные выражения**
- Паттерны для поиска в текстах
- Извлечение структурированных данных
- Валидация данных

**CSV и табличные данные**
- Работа с таблицами
- Pandas для больших корпусов
- Экспорт результатов

**Финальные проекты**
- Применение всех навыков
- Ваш собственный DH-инструмент

---

## Дополнительные ресурсы

**Документация Python:**
- [collections — Container datatypes](https://docs.python.org/3/library/collections.html)
- [set — Built-in types](https://docs.python.org/3/library/stdtypes.html#set)
- [import — Modules](https://docs.python.org/3/tutorial/modules.html)

**DH-ресурсы:**
- PoeTree API: https://versologie.cz/poetree/
- DraCor API: https://dracor.org/doc/api
- НКРЯ: https://ruscorpora.ru/

