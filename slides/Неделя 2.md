---
marp: true
header: 
footer: ![height:40px](https://www.markslides.ai/image/credit.png)
paginate: false
class: normal
theme: default
size: 16:9
style: |
  pre {
    overflow: auto;
  }
---

# 2. Работа с текстом. Строки в Python: индексы/срезы, методы и форматирование

> Сегодня: **строки как последовательности** (индексы/срезы) и **строки как объекты** (методы + форматирование).

---
![width:800](https://cdn.markslides.ai/users/2662/images/SmsQ1b9M3kiFy5jEVS91I)
<style scoped>
  section > p {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    gap: 16px;
  }
</style>

---
<style scoped>
  section > p {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    gap: 16px;
  }
</style>
![width:800](https://cdn.markslides.ai/users/2662/images/K4Yvc-iSQqDBGToFiKMaL)

---
<style scoped>
  section > p {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    gap: 16px;
  }
</style>
![width:800](https://cdn.markslides.ai/users/2662/images/qUb2xhEnldyxLyPioSgUm)

---
# Корпуса текстов
Корпус — тщательно собранная коллекция текстов с метаданными и (часто) лингвистической разметкой.

Принципы: репрезентативность, воспроизводимость, прозрачность источников.

Что даёт филологу: конкордансы и коллокации, частотные словари, поиск по леммам/N‑граммам, стилистика и метрика, вариантология/источниковедение, диахрония и жанры.

---

# Чем корпус отличается от веб-сайта с текстами?

---
<style scoped>
  section > p {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    gap: 256px;
  }
</style>

![height:500px](https://cdn.markslides.ai/users/2662/images/6yK-WkvLGl4GCI_luZ4_o) ![height:500px](https://cdn.markslides.ai/users/2662/images/tT785L1Jpjbg9-TOB4ctz) 


---
<style scoped>
  section > p {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    gap: 156px;
  }
</style>
![](https://cdn.markslides.ai/users/2662/images/DbIKSHadWuxEpYD_2Tiwx) ![](https://cdn.markslides.ai/users/2662/images/dAyogBzIwuccTs8YEeGim)

---

<style scoped>
  h1 {
    font-size: 2.3rem;
  }
  h2 {
    font-size: 1.6rem;
  }
</style>

![width:700px bg right](https://cdn.markslides.ai/users/2662/images/5Hk361S8aFSQeqTJh9XXH)

# PoeTree

Poetry Treebanks в 10 языках; порядка 331 802 стихотворений, 11 840 882 строк, 89 009 902 токенов

---

# Индексы и срезы

### Зачем нужны индексы и срезы?

* Извлечение фрагментов цитат и метаданных (автор, год, страницы)
* «Лемма» и «окончание» в слове: первые/последние N символов
* Быстрые проверки формата (дат, ссылок, сигл)
* 
---

### Строка = последовательность символов (Unicode)

* `len(text)` — число символов
* **Индексы с нуля**: `text[0]` — первый, `text[1]` — второй
* Последний символ: `text[-1]` (короче, чем `text[len(text)-1]`)

```python
line = "Мой дядя самых честных правил..."
len(line), line[0], line[-1]
```

---

![width:800px](https://cdn.markslides.ai/users/2662/images/OSRt_2nOjlQ_FAfd4sZx9)
<style scoped>
  section > p {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    gap: 16px;
  }
</style>


---

### Индексация: положительная и отрицательная

* Положительные: `0, 1, 2, ...`
* Отрицательные: `-1, -2, ...` — с конца
* `IndexError` при выходе за границы у **индекса**, не у **среза**

```python
line[0], line[5], line[-1], line[-2]
# line[10_000]  # ❌ IndexError
```

---

### Срезы: `start:stop:step`

* Базовые: `text[a:b]` — от `a` включительно до `b` **не включая**
* Пропуски: `text[:b]`, `text[a:]`, `text[:]`
* Шаг: `text[a:b:c]`, каждый второй символ: `text[::2]`

```python
line[:7], line[8:13], line[::2]
```
---
```python
line = "Бессонница. Гомер. Пустые паруса"

print(line[:7])
```
Бессонн
```python
print(line[8:13])
```
ца. Г

---

### Обратный ход и смешанные границы

* Разворот строки: `text[::-1]`
* Срез назад: `text[10:2:-1]`
* Отрицательные границы: `text[-5:-2]`, `text[2:-3]`

```python
line = "Бессонница. Гомер. Пустые паруса"
print(line[::-1])
```
асуреп еытсуП .ремоГ .акцинноссеБ

```python
print(line[17:10:-1])
```
.ациннос

---
```python
word = "арбуз у зубра"

print(word[::-1])
```

---

### Неизменяемость строк

* `text[0] = 'А'` — **нельзя** (TypeError)
* Меняем через **новую** строку: конкатенация, f-строки

```python
sample = "пример"
new_sample = "Нап" + sample[1:]
```

---

### Сравнение строк и Unicode

* Лексикографический порядок: `"а" < "я"`
* Регистр важен: `"Текст" != "текст"`; заглавные раньше строчных
* Кириллица/латиница: порядок по Unicode (может удивить)

---

### Чек-лист срезов

* [ ] Отсчет с нуля (`text[0]`)
* [ ] Правая граница **не включается**
* [ ] Срезы «безопасны» при выходе за границы
* [ ] `[::-1]` — быстрый разворот
* [ ] Строки **иммутабельны**

---

### Анти-капкан

1. Путаница `text[:5]` vs `text[0:5]` — это одно и то же
2. `text[999]` падает, `text[500:999]` — нет
3. Пустой срез `text[5:5]` → `""`
4. Срез назад без корректных границ может дать `""`

---

### Итоги 2.1

* Строка как **последовательность**: индексы, срезы, шаг, обратный порядок
* Иммутабельность и сборка новой строки
* Основа для парсинга цитат и метаданных

---

# Часть 2.2 — Методы строк

Метод — это функция, «прикреплённая» к объекту.
Вызывается через точку: 
> `object.method(arguments)`

Отличие от функции:
- `len(text)` — это функция (передаём объект внутрь);
- `text.lower()` — это метод (вызываем у самого объекта).

---
Методы зависят от типа переменной.
У строк — свои методы (`.lower()`, `.split()`), у списков — другие (`.append()`, `.sort()`).

### Иммутабельность и результат
Строки не изменяются: метод возвращает новую строку.
У изменяемых типов (например, список) некоторые методы меняют сам объект.

---
### Частые ошибки:

Забыли скобки: `text.lower` (это ссылка на метод), нужно `text.lower()`.

«Почему ничего не изменилось?» — вы забыли сохранить результат:
text = text.strip() или использовать новую переменную.

---

### Регистр

* `.lower()`, `.upper()`, `.capitalize()`, `.title()`
* Регистронезависимое сравнение/поиск: `a.lower() == b.lower()`

```python
"Мотив".lower() in "мотивы и мотивчики".lower()
```

---

### Пробелы и края

* `.strip()` / `.lstrip()` / `.rstrip()` — только по краям
* Набор символов: `.strip(' .,!')`
* Нормализация внутренних пробелов: `' '.join(text.split())`

---

### Разбиение и сборка

* `.split()` vs `.split(' ')` (двойные пробелы)
* `maxsplit`, `.splitlines()`
* `' '.join(words)` — все элементы должны быть **строки**

```python
words = text.split()
' '.join(words)
```

---

### Замены

* `.replace(old, new[, count])`
* Осторожно: без учета регистра и границ слова
* Частые паттерны: тире, троеточия, длинные пробелы

---

### Поиск и счетчики

* `in`, `.count()`
* `.startswith(prefix)`, `.endswith(suffix)` (поддерживают **кортежи**)
* `.find(sub)` 

---

### Проверка содержимого

* `.isdigit()`, `.isalpha()`, `.isalnum()`, `.isspace()`
* `.isupper()`, `.islower()`

---

### Чек‑лист методов

* [ ] Помним об иммутабельности: сохраняем результат
* [ ] Для регистронезависимого поиска → `.lower()`
* [ ] Нормализуем пробелы через `split/join`
* [ ] `.replace` — аккуратно: может менять внутри слов
* [ ] Форматируем вывод f‑строками

---

### Анти‑капкан

1. Ожидание, что `text.replace(...)` изменит `text`
2. `.split(' ')` ломается на двойных пробелах; берите `.split()`
3. `.join()` — только строки
4. `.title()` портит сокращения и апострофы

---


### Итоги 2.2

* Строка как **объект**: методы + форматирование
* Конвейер нормализации текста (цепочки методов)


